datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Targetas {
    visa
    master
}

model CategoriaPago {
    id          String @id @default(auto()) @map("_id") @db.ObjectId
    descripcion String @unique
}

model Gasto {
    id          String @id @default(auto()) @map("_id") @db.ObjectId
    descripcion String
    monto       Float
    fecha       DateTime
    categoria   String
    gastoC      GastoC? @relation(fields: [gastoCId], references: [id])
    gastoCId    String? @unique @db.ObjectId
    gastoD      GastoD? @relation(fields: [gastoDId], references: [id])
    gastoDId    String?  @db.ObjectId
    gastoE      GastoE? @relation(fields: [gastoEId], references: [id])
    gastoEId    String?  @db.ObjectId
}

model GastoC {
    id      String @id @default(auto()) @map("_id") @db.ObjectId
    cuotas      Int
    cuotaActual Int?
    gasto       Gasto?
    terminado   Boolean
    targetaC    TargetaC @relation(fields: [targetaCId], references: [id])
    targetaCId  String @db.ObjectId
}

model GastoD {
    id      String @id @default(auto()) @map("_id") @db.ObjectId
    gastos  Gasto[]
}

model GastoE {
    id      String @id @default(auto()) @map("_id") @db.ObjectId
    gatos   Gasto[]
}

model TargetaC {
    id              String @id @default(auto()) @map("_id") @db.ObjectId
    nombre          Targetas
    cierre          DateTime
    vencimiento     DateTime
    limite          Float
    disponibilidad  Float
    gastosC         GastoC[]
}

model Categoria {
    id          String @id @default(auto()) @map("_id") @db.ObjectId
    descripcion String @unique
    activa      Boolean @default(false)
}